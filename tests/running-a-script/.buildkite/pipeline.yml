env:
  THIS_GLOBAL_ENV: "true"

steps:
  -
    name: ":console: this-script-doesn-have-chmod-x.sh"
    command: "this-script-doesn-have-chmod-x.sh"
    agents:
      - "docker=true"

  -
    name: ":docker: this-script-doesn-have-chmod-x.sh"
    command: "this-script-doesn-have-chmod-x.sh"
    env:
      BUILDKITE_DOCKER_COMPOSE_CONTAINER: "app"
    agents:
      - "docker=true"

  - waiter

  -
    name: ":console: script.sh"
    command: "script.sh"
    agents:
      - "docker=true"

  -
    name: ":docker: script.sh"
    command: "script.sh"
    agents:
      - "docker=true"
    env:
      BUILDKITE_DOCKER_COMPOSE_CONTAINER: "app"

  - waiter

  -
    name: ":console: this is a test/and this is a script.sh"
    command: "this is a test/and this is a script.sh"
    agents:
      - "docker=true"

  -
    name: ":docker: this is a test/and this is a script.sh"
    command: "this is a test/and this is a script.sh"
    agents:
      - "docker=true"
    env:
      BUILDKITE_DOCKER_COMPOSE_CONTAINER: "app"

  - waiter

  -
    name: ':console: ls -lsa; echo "hello"'
    command: |
      ls -lsa
      echo "hello"
    agents:
      - "docker=true"

  -
    name: ':docker: ls -lsa; echo "hello"'
    command: |
      ls -lsa
      echo "hello"
    agents:
      - "docker=true"
    env:
      BUILDKITE_DOCKER_COMPOSE_CONTAINER: "app"
